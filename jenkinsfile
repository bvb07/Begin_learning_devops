
pipeline {
    agent any
    environment{
        TEST_URL = 'https://images.unsplash.com/photo-1673234759103-4bc13ee175d0?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=987&q=80'
            
    
    }
    stages {
        stage('Init'){
            steps{
                sh '''
                cd compose
                pwd
                docker --version
                ls -a
            
                '''
                echo 'Init'
                echo '******************************'  
                echo "registry url : ${env.TEST_URL}"
               
                echo '*************************************************'
            }
          }
        stage('build'){
            steps{
                sh '''
                cd compose
                docker-compose up -d
                pwd
                '''
                echo '*************************************************'
              }
          }
        stage('stop end'){
            steps{
                sh '''
                cd compose
                docker-compose down
                pwd
                node -v
                kubectl
                cd ..
                cd kube
                gcloud container clusters get-credentials trainee --zone asia-east1-a --project customix
                kubectl get pods
                kubectl get service
                kubectl get ingrese
                '''
                echo '*************************************************'
           }
        }
       


        
    }
}
